<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Detailed information on the GhApi API">

<title>GhApi details – ghapi</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-baedc78cbf92349237790bf011c153e8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="GhApi details – ghapi">
<meta property="og:description" content="Detailed information on the GhApi API">
<meta property="og:site_name" content="ghapi">
<meta name="twitter:title" content="GhApi details – ghapi">
<meta name="twitter:description" content="Detailed information on the GhApi API">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ghapi</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/answerDotAI/ghapi"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./core.html">GhApi details</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ghapi</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">GhApi details</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./actions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GitHub Actions details</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./auth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Authentication</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pagination</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./event.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The events API</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphql.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">graphql</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cli.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Command line interface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fullapi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Full GitHub API reference</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./build_lib.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Internal - OpenAPI Parser</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#print_summary" id="toc-print_summary" class="nav-link active" data-scroll-target="#print_summary">print_summary</a></li>
  <li><a href="#ghapi" id="toc-ghapi" class="nav-link" data-scroll-target="#ghapi">GhApi</a></li>
  <li><a href="#access-by-path" id="toc-access-by-path" class="nav-link" data-scroll-target="#access-by-path">Access by path</a></li>
  <li><a href="#ghapi.__call__" id="toc-ghapi.__call__" class="nav-link" data-scroll-target="#ghapi.__call__">GhApi.__call__</a></li>
  <li><a href="#ghapi.__getitem__" id="toc-ghapi.__getitem__" class="nav-link" data-scroll-target="#ghapi.__getitem__">GhApi.__getitem__</a></li>
  <li><a href="#media-types" id="toc-media-types" class="nav-link" data-scroll-target="#media-types">Media types</a></li>
  <li><a href="#rate-limits" id="toc-rate-limits" class="nav-link" data-scroll-target="#rate-limits">Rate limits</a></li>
  <li><a href="#operations" id="toc-operations" class="nav-link" data-scroll-target="#operations">Operations</a>
  <ul class="collapse">
  <li><a href="#operation-groups" id="toc-operation-groups" class="nav-link" data-scroll-target="#operation-groups">Operation groups</a></li>
  <li><a href="#calling-endpoints" id="toc-calling-endpoints" class="nav-link" data-scroll-target="#calling-endpoints">Calling endpoints</a></li>
  <li><a href="#convenience-functions" id="toc-convenience-functions" class="nav-link" data-scroll-target="#convenience-functions">Convenience functions</a></li>
  <li><a href="#date2gh" id="toc-date2gh" class="nav-link" data-scroll-target="#date2gh">date2gh</a></li>
  <li><a href="#gh2date" id="toc-gh2date" class="nav-link" data-scroll-target="#gh2date">gh2date</a></li>
  <li><a href="#preview-endpoints" id="toc-preview-endpoints" class="nav-link" data-scroll-target="#preview-endpoints">Preview endpoints</a></li>
  </ul></li>
  <li><a href="#convenience-methods" id="toc-convenience-methods" class="nav-link" data-scroll-target="#convenience-methods">Convenience methods</a>
  <ul class="collapse">
  <li><a href="#ghapi.create_gist" id="toc-ghapi.create_gist" class="nav-link" data-scroll-target="#ghapi.create_gist">GhApi.create_gist</a></li>
  <li><a href="#releases" id="toc-releases" class="nav-link" data-scroll-target="#releases">Releases</a></li>
  <li><a href="#ghapi.delete_release" id="toc-ghapi.delete_release" class="nav-link" data-scroll-target="#ghapi.delete_release">GhApi.delete_release</a></li>
  <li><a href="#ghapi.upload_file" id="toc-ghapi.upload_file" class="nav-link" data-scroll-target="#ghapi.upload_file">GhApi.upload_file</a></li>
  <li><a href="#ghapi.create_release" id="toc-ghapi.create_release" class="nav-link" data-scroll-target="#ghapi.create_release">GhApi.create_release</a></li>
  <li><a href="#ghapi.delete_release-1" id="toc-ghapi.delete_release-1" class="nav-link" data-scroll-target="#ghapi.delete_release-1">GhApi.delete_release</a></li>
  <li><a href="#branches-and-tags" id="toc-branches-and-tags" class="nav-link" data-scroll-target="#branches-and-tags">Branches and tags</a></li>
  <li><a href="#ghapi.list_tags" id="toc-ghapi.list_tags" class="nav-link" data-scroll-target="#ghapi.list_tags">GhApi.list_tags</a></li>
  <li><a href="#ghapi.list_branches" id="toc-ghapi.list_branches" class="nav-link" data-scroll-target="#ghapi.list_branches">GhApi.list_branches</a></li>
  <li><a href="#ghapi.create_branch_empty" id="toc-ghapi.create_branch_empty" class="nav-link" data-scroll-target="#ghapi.create_branch_empty">GhApi.create_branch_empty</a></li>
  <li><a href="#ghapi.delete_tag" id="toc-ghapi.delete_tag" class="nav-link" data-scroll-target="#ghapi.delete_tag">GhApi.delete_tag</a></li>
  <li><a href="#ghapi.delete_branch" id="toc-ghapi.delete_branch" class="nav-link" data-scroll-target="#ghapi.delete_branch">GhApi.delete_branch</a></li>
  <li><a href="#ghapi.get_branch" id="toc-ghapi.get_branch" class="nav-link" data-scroll-target="#ghapi.get_branch">GhApi.get_branch</a></li>
  <li><a href="#content-git-files" id="toc-content-git-files" class="nav-link" data-scroll-target="#content-git-files">Content (git files)</a></li>
  <li><a href="#ghapi.list_files" id="toc-ghapi.list_files" class="nav-link" data-scroll-target="#ghapi.list_files">GhApi.list_files</a></li>
  <li><a href="#ghapi.get_content" id="toc-ghapi.get_content" class="nav-link" data-scroll-target="#ghapi.get_content">GhApi.get_content</a></li>
  <li><a href="#ghapi.create_or_update_file" id="toc-ghapi.create_or_update_file" class="nav-link" data-scroll-target="#ghapi.create_or_update_file">GhApi.create_or_update_file</a></li>
  <li><a href="#ghapi.create_file" id="toc-ghapi.create_file" class="nav-link" data-scroll-target="#ghapi.create_file">GhApi.create_file</a></li>
  <li><a href="#ghapi.delete_file" id="toc-ghapi.delete_file" class="nav-link" data-scroll-target="#ghapi.delete_file">GhApi.delete_file</a></li>
  <li><a href="#ghapi.update_contents" id="toc-ghapi.update_contents" class="nav-link" data-scroll-target="#ghapi.update_contents">GhApi.update_contents</a></li>
  <li><a href="#ghapi.get_repo_files" id="toc-ghapi.get_repo_files" class="nav-link" data-scroll-target="#ghapi.get_repo_files">GhApi.get_repo_files</a></li>
  <li><a href="#ghapi.get_file_content" id="toc-ghapi.get_file_content" class="nav-link" data-scroll-target="#ghapi.get_file_content">GhApi.get_file_content</a></li>
  <li><a href="#ghapi.get_repo_contents" id="toc-ghapi.get_repo_contents" class="nav-link" data-scroll-target="#ghapi.get_repo_contents">GhApi.get_repo_contents</a></li>
  <li><a href="#github-pages" id="toc-github-pages" class="nav-link" data-scroll-target="#github-pages">GitHub Pages</a></li>
  <li><a href="#ghapi.enable_pages" id="toc-ghapi.enable_pages" class="nav-link" data-scroll-target="#ghapi.enable_pages">GhApi.enable_pages</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/fastai/ghapi/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="core.html.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">GhApi details</h1>
</div>

<div>
  <div class="description">
    Detailed information on the GhApi API
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>You can set an environment variable named <code>GH_HOST</code> to override the default of <code>https://api.github.com</code> incase you are running <a href="https://github.com/enterprise">GitHub Enterprise</a>(GHE). However, this library has not been tested on GHE, so proceed at your own risk.</p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L89" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="print_summary" class="level3">
<h3 class="anchored" data-anchor-id="print_summary">print_summary</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> print_summary(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    req:Request</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Print <code>Request.summary</code> with the token (if any) removed</em></p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L97" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi" class="level3">
<h3 class="anchored" data-anchor-id="ghapi">GhApi</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> GhApi(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    owner:NoneType<span class="op">=</span><span class="va">None</span>, repo:NoneType<span class="op">=</span><span class="va">None</span>, token:NoneType<span class="op">=</span><span class="va">None</span>, jwt_token:NoneType<span class="op">=</span><span class="va">None</span>, debug:NoneType<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    limit_cb:NoneType<span class="op">=</span><span class="va">None</span>, gh_host:NoneType<span class="op">=</span><span class="va">None</span>, authenticate:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, kwargs:VAR_KEYWORD</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Initialize self. See help(type(self)) for accurate signature.</em></p>
</section>
<section id="access-by-path" class="level3">
<h3 class="anchored" data-anchor-id="access-by-path">Access by path</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L115" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.__call__" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.__call__">GhApi.__call__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__call__</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    path:<span class="bu">str</span>, verb:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, headers:<span class="bu">dict</span><span class="op">=</span><span class="va">None</span>, route:<span class="bu">dict</span><span class="op">=</span><span class="va">None</span>, query:<span class="bu">dict</span><span class="op">=</span><span class="va">None</span>, data:NoneType<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    timeout:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Call a fully specified <code>path</code> using HTTP <code>verb</code>, passing arguments to <code>fastcore.core.urlsend</code></em></p>
<div id="50eaf447" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> GhApi()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You can call a <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> object as a function, passing in the path to the endpoint, the HTTP verb, and any route, query parameter, or post data parameters as required.</p>
<div id="9d3ecf23" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>api(<span class="st">'/repos/</span><span class="sc">{owner}</span><span class="st">/</span><span class="sc">{repo}</span><span class="st">/git/ref/</span><span class="sc">{ref}</span><span class="st">'</span>, <span class="st">'GET'</span>, route<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    owner<span class="op">=</span><span class="st">'fastai'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, ref<span class="op">=</span><span class="st">'heads/master'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>{ <span class="st">'node_id'</span>: <span class="st">'MDM6UmVmMzE1NzEyNTg4OnJlZnMvaGVhZHMvbWFzdGVy'</span>,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">'object'</span>: { <span class="st">'sha'</span>: <span class="st">'b72d6c87a9237ca3c26298a64a6acf06217ace4a'</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">'type'</span>: <span class="st">'commit'</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">'url'</span>: <span class="st">'https://api.github.com/repos/fastai/ghapi-test/git/commits/b72d6c87a9237ca3c26298a64a6acf06217ace4a'</span>},</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">'ref'</span>: <span class="st">'refs/heads/master'</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">'url'</span>: <span class="st">'https://api.github.com/repos/fastai/ghapi-test/git/refs/heads/master'</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L141" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.__getitem__" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.__getitem__">GhApi.__getitem__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__getitem__</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    k</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Lookup and call an endpoint by path and verb (which defaults to ‘GET’)</em></p>
<p>You can access endpoints by indexing into the object. When using the API this way, you do not need to specify what type of parameter (route, query, or post data) is being used. This is, therefore, the same call as above:</p>
<div id="d9a70c54" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>api[<span class="st">'/repos/</span><span class="sc">{owner}</span><span class="st">/</span><span class="sc">{repo}</span><span class="st">/git/ref/</span><span class="sc">{ref}</span><span class="st">'</span>](owner<span class="op">=</span><span class="st">'fastai'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, ref<span class="op">=</span><span class="st">'heads/master'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>{ <span class="st">'node_id'</span>: <span class="st">'MDM6UmVmMzE1NzEyNTg4OnJlZnMvaGVhZHMvbWFzdGVy'</span>,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">'object'</span>: { <span class="st">'sha'</span>: <span class="st">'b72d6c87a9237ca3c26298a64a6acf06217ace4a'</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">'type'</span>: <span class="st">'commit'</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">'url'</span>: <span class="st">'https://api.github.com/repos/fastai/ghapi-test/git/commits/b72d6c87a9237ca3c26298a64a6acf06217ace4a'</span>},</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">'ref'</span>: <span class="st">'refs/heads/master'</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">'url'</span>: <span class="st">'https://api.github.com/repos/fastai/ghapi-test/git/refs/heads/master'</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="media-types" class="level3">
<h3 class="anchored" data-anchor-id="media-types">Media types</h3>
<p>For some endpoints GitHub lets you specify a <a href="https://docs.github.com/en/rest/overview/media-types">media type</a> the for response data, using the <code>Accept</code> header. If you choose a media type that is not JSON formatted (for instance <code>application/vnd.github.v3.sha</code>) then the call to the <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> object will return a string instead of an object.</p>
<div id="d988f7ce" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>api(<span class="st">'/repos/</span><span class="sc">{owner}</span><span class="st">/</span><span class="sc">{repo}</span><span class="st">/commits/</span><span class="sc">{ref}</span><span class="st">'</span>, <span class="st">'GET'</span>, route<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    owner<span class="op">=</span><span class="st">'fastai'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, ref<span class="op">=</span><span class="st">'refs/heads/master'</span>),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    headers<span class="op">=</span>{<span class="st">'Accept'</span>: <span class="st">'application/vnd.github.VERSION.sha'</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'b72d6c87a9237ca3c26298a64a6acf06217ace4a'</code></pre>
</div>
</div>
</section>
<section id="rate-limits" class="level3">
<h3 class="anchored" data-anchor-id="rate-limits">Rate limits</h3>
<p>GitHub has various <a href="https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting">rate limits</a> for their API. After each call, the response includes information about how many requests are remaining in the hourly quota. If you’d like to add alerts, or indications showing current quota usage, you can register a callback with <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> by passing a callable to the <code>limit_cb</code> parameter. This callback will be called whenever the amount of quota used changes. It will be called with two arguments: the new quota remaining, and the total hourly quota.</p>
<div id="773a925a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _f(rem,quota): <span class="bu">print</span>(<span class="ss">f"Quota remaining: </span><span class="sc">{</span>rem<span class="sc">}</span><span class="ss"> of </span><span class="sc">{</span>quota<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> GhApi(limit_cb<span class="op">=</span>_f)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>api[<span class="st">'/repos/</span><span class="sc">{owner}</span><span class="st">/</span><span class="sc">{repo}</span><span class="st">/git/ref/</span><span class="sc">{ref}</span><span class="st">'</span>](owner<span class="op">=</span><span class="st">'fastai'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, ref<span class="op">=</span><span class="st">'heads/master'</span>).ref</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Quota remaining: 4799 of 5000</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>'refs/heads/master'</code></pre>
</div>
</div>
<p>You can always get the remaining quota from the <code>limit_rem</code> attribute:</p>
<div id="28428917" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>api.limit_rem</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'4799'</code></pre>
</div>
</div>
</section>
<section id="operations" class="level2">
<h2 class="anchored" data-anchor-id="operations">Operations</h2>
<p>Instead of passing a path to <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a>, you will more often use the operation methods provided in the API’s operation groups, which include documentation, signatures, and auto-complete.</p>
<p>If you provide <code>owner</code> and/or <code>repo</code> to the constructor, they will be automatically inserted into any calls which use them (except when calling <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> as a function). You can also pass any other arbitrary keyword arguments you like to have them used as defaults for any relevant calls.</p>
<p>You must include a GitHub API token if you need to access any authenticated endpoints. If don’t pass the <code>token</code> param, then your <code>GITHUB_TOKEN</code> environment variable will be used, if available.</p>
<div id="e701771c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> GhApi(owner<span class="op">=</span><span class="st">'AnswerDotAI'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, token<span class="op">=</span>token)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="operation-groups" class="level3">
<h3 class="anchored" data-anchor-id="operation-groups">Operation groups</h3>
<p>The following groups of endpoints are provided, which you can list at any time along with a link to documentation for all endpoints in that group, by displaying the <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> object:</p>
<div id="fca21d8f" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>api</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<ul>
<li><a href="https://docs.github.com/rest/reference/actions">actions</a></li>
<li><a href="https://docs.github.com/rest/reference/activity">activity</a></li>
<li><a href="https://docs.github.com/rest/reference/api-insights">api_insights</a></li>
<li><a href="https://docs.github.com/rest/reference/apps">apps</a></li>
<li><a href="https://docs.github.com/rest/reference/billing">billing</a></li>
<li><a href="https://docs.github.com/rest/reference/campaigns">campaigns</a></li>
<li><a href="https://docs.github.com/rest/reference/checks">checks</a></li>
<li><a href="https://docs.github.com/rest/reference/classroom">classroom</a></li>
<li><a href="https://docs.github.com/rest/reference/code-scanning">code_scanning</a></li>
<li><a href="https://docs.github.com/rest/reference/code-security">code_security</a></li>
<li><a href="https://docs.github.com/rest/reference/codes-of-conduct">codes_of_conduct</a></li>
<li><a href="https://docs.github.com/rest/reference/codespaces">codespaces</a></li>
<li><a href="https://docs.github.com/rest/reference/copilot">copilot</a></li>
<li><a href="https://docs.github.com/rest/reference/credentials">credentials</a></li>
<li><a href="https://docs.github.com/rest/reference/dependabot">dependabot</a></li>
<li><a href="https://docs.github.com/rest/reference/dependency-graph">dependency_graph</a></li>
<li><a href="https://docs.github.com/rest/reference/emojis">emojis</a></li>
<li><a href="https://docs.github.com/rest/reference/enterprise-team-memberships">enterprise_team_memberships</a></li>
<li><a href="https://docs.github.com/rest/reference/enterprise-team-organizations">enterprise_team_organizations</a></li>
<li><a href="https://docs.github.com/rest/reference/enterprise-teams">enterprise_teams</a></li>
<li><a href="https://docs.github.com/rest/reference/gists">gists</a></li>
<li><a href="https://docs.github.com/rest/reference/git">git</a></li>
<li><a href="https://docs.github.com/rest/reference/gitignore">gitignore</a></li>
<li><a href="https://docs.github.com/rest/reference/hosted-compute">hosted_compute</a></li>
<li><a href="https://docs.github.com/rest/reference/interactions">interactions</a></li>
<li><a href="https://docs.github.com/rest/reference/issues">issues</a></li>
<li><a href="https://docs.github.com/rest/reference/licenses">licenses</a></li>
<li><a href="https://docs.github.com/rest/reference/markdown">markdown</a></li>
<li><a href="https://docs.github.com/rest/reference/meta">meta</a></li>
<li><a href="https://docs.github.com/rest/reference/migrations">migrations</a></li>
<li><a href="https://docs.github.com/rest/reference/oidc">oidc</a></li>
<li><a href="https://docs.github.com/rest/reference/orgs">orgs</a></li>
<li><a href="https://docs.github.com/rest/reference/packages">packages</a></li>
<li><a href="https://docs.github.com/rest/reference/private-registries">private_registries</a></li>
<li><a href="https://docs.github.com/rest/reference/projects">projects</a></li>
<li><a href="https://docs.github.com/rest/reference/pulls">pulls</a></li>
<li><a href="https://docs.github.com/rest/reference/rate-limit">rate_limit</a></li>
<li><a href="https://docs.github.com/rest/reference/reactions">reactions</a></li>
<li><a href="https://docs.github.com/rest/reference/repos">repos</a></li>
<li><a href="https://docs.github.com/rest/reference/search">search</a></li>
<li><a href="https://docs.github.com/rest/reference/secret-scanning">secret_scanning</a></li>
<li><a href="https://docs.github.com/rest/reference/security-advisories">security_advisories</a></li>
<li><a href="https://docs.github.com/rest/reference/teams">teams</a></li>
<li><a href="https://docs.github.com/rest/reference/users">users</a></li>
</ul>
</div>
</div>
<div id="68f5d7df" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>api.codes_of_conduct</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<ul>
<li><a href="https://docs.github.com/rest/codes-of-conduct/codes-of-conduct#get-all-codes-of-conduct">codes-of-conduct.get_all_codes_of_conduct</a>(): <em>Get all codes of conduct</em></li>
<li><a href="https://docs.github.com/rest/codes-of-conduct/codes-of-conduct#get-a-code-of-conduct">codes-of-conduct.get_conduct_code</a>(key): <em>Get a code of conduct</em></li>
</ul>
</div>
</div>
</section>
<section id="calling-endpoints" class="level3">
<h3 class="anchored" data-anchor-id="calling-endpoints">Calling endpoints</h3>
<p>The GitHub API’s endpoint names generally start with a verb like “get”, “list”, “delete”, “create”, etc, followed <code>_</code>, then by a noun such as “ref”, “webhook”, “issue”, etc.</p>
<p>Each endpoint has a different signature, which you can see by using <kbd>Shift</kbd>-<kbd>Tab</kbd> in Jupyter, or by just printing the endpoint object (which also shows a link to the GitHub docs):</p>
<div id="0e87ae34" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(api.repos.create_webhook)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>repos.create_webhook(name: str = None, config: dict = None, events: list = ['push'], active: bool = True)
https://docs.github.com/rest/repos/webhooks#create-a-repository-webhook</code></pre>
</div>
</div>
<p>Displaying an endpoint object in Jupyter also provides a formatted summary and link to the official GitHub documentation:</p>
<div id="4dbca1b3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>api.repos.create_webhook</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><a href="https://docs.github.com/rest/repos/webhooks#create-a-repository-webhook">repos.create_webhook</a>(name, config, events, active): <em>Create a repository webhook</em></p>
</div>
</div>
<p>Endpoint objects are called using standard Python method syntax:</p>
<div id="fb91c5eb" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>ref <span class="op">=</span> api.git.get_ref(<span class="st">'heads/master'</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>test_eq(ref.<span class="bu">object</span>.<span class="bu">type</span>, <span class="st">'commit'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Information about the endpoint are available as attributes:</p>
<div id="4a630de7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>api.git.get_ref.path,api.git.get_ref.verb</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>('/repos/AnswerDotAI/ghapi-test/git/ref/{ref}', 'get')</code></pre>
</div>
</div>
<p>You can get a list of all endpoints available in a group, along with a link to documentation for each, by viewing the group:</p>
<div id="d1d117a1" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>api.git</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<ul>
<li><a href="https://docs.github.com/rest/git/blobs#create-a-blob">git.create_blob</a>(content, encoding): <em>Create a blob</em></li>
<li><a href="https://docs.github.com/rest/git/blobs#get-a-blob">git.get_blob</a>(file_sha): <em>Get a blob</em></li>
<li><a href="https://docs.github.com/rest/git/commits#create-a-commit">git.create_commit</a>(message, tree, parents, author, committer, signature): <em>Create a commit</em></li>
<li><a href="https://docs.github.com/rest/git/commits#get-a-commit-object">git.get_commit</a>(commit_sha): <em>Get a commit object</em></li>
<li><a href="https://docs.github.com/rest/git/refs#list-matching-references">git.list_matching_refs</a>(ref): <em>List matching references</em></li>
<li><a href="https://docs.github.com/rest/git/refs#get-a-reference">git.get_ref</a>(ref): <em>Get a reference</em></li>
<li><a href="https://docs.github.com/rest/git/refs#create-a-reference">git.create_ref</a>(ref, sha): <em>Create a reference</em></li>
<li><a href="https://docs.github.com/rest/git/refs#update-a-reference">git.update_ref</a>(ref, sha, force): <em>Update a reference</em></li>
<li><a href="https://docs.github.com/rest/git/refs#delete-a-reference">git.delete_ref</a>(ref): <em>Delete a reference</em></li>
<li><a href="https://docs.github.com/rest/git/tags#create-a-tag-object">git.create_tag</a>(tag, message, object, type, tagger): <em>Create a tag object</em></li>
<li><a href="https://docs.github.com/rest/git/tags#get-a-tag">git.get_tag</a>(tag_sha): <em>Get a tag</em></li>
<li><a href="https://docs.github.com/rest/git/trees#create-a-tree">git.create_tree</a>(tree, base_tree): <em>Create a tree</em></li>
<li><a href="https://docs.github.com/rest/git/trees#get-a-tree">git.get_tree</a>(tree_sha, recursive): <em>Get a tree</em></li>
</ul>
</div>
</div>
<p>For “list” endpoints, the noun will be a plural form, e.g.:</p>
<div id="ecba0f36" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>hooks <span class="op">=</span> api.repos.list_webhooks()</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(hooks), <span class="dv">0</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You can pass dicts, lists, etc. directly, where they are required for GitHub API endpoints:</p>
<div id="bc426539" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://example.com'</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>cfg <span class="op">=</span> <span class="bu">dict</span>(url<span class="op">=</span>url, content_type<span class="op">=</span><span class="st">'json'</span>, secret<span class="op">=</span><span class="st">'XXX'</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>hook <span class="op">=</span> api.repos.create_webhook(config<span class="op">=</span>cfg, events<span class="op">=</span>[<span class="st">'ping'</span>])</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>test_eq(hook.config.url, url)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s confirm that our new webhook has been created:</p>
<div id="a0ef7a38" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>hooks <span class="op">=</span> api.repos.list_webhooks()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(hooks), <span class="dv">1</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>test_eq(hooks[<span class="dv">0</span>].events, [<span class="st">'ping'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Finally, we can delete our new webhook:</p>
<div id="6fc312ee" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>api.repos.delete_webhook(hooks[<span class="dv">0</span>].<span class="bu">id</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>{}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="convenience-functions" class="level3">
<h3 class="anchored" data-anchor-id="convenience-functions">Convenience functions</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L150" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="date2gh" class="level3">
<h3 class="anchored" data-anchor-id="date2gh">date2gh</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> date2gh(</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    dt:datetime</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>)<span class="op">-&gt;</span><span class="bu">str</span>:</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Convert <code>dt</code> (which is assumed to be in UTC time zone) to a format suitable for GitHub API operations</em></p>
<p>The GitHub API assumes that dates will be in a specific string format. <a href="https://ghapi.fast.ai/core.html#date2gh"><code>date2gh</code></a> converts Python standard <code>datetime</code> objects to that format. For instance, to find issues opened in the ‘fastcore’ repo in the last 4 weeks:</p>
<div id="571a18a6" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> date2gh(datetime.now(timezone.utc) <span class="op">-</span> timedelta(weeks<span class="op">=</span><span class="dv">4</span>))</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>issues <span class="op">=</span> GhApi(<span class="st">'fastai'</span>).issues.list_for_repo(repo<span class="op">=</span><span class="st">'fastcore'</span>, since<span class="op">=</span>dt)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(issues)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>4</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L155" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="gh2date" class="level3">
<h3 class="anchored" data-anchor-id="gh2date">gh2date</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gh2date(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    dtstr:<span class="bu">str</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>)<span class="op">-&gt;</span>datetime:</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Convert date string <code>dtstr</code> received from a GitHub API operation to a UTC <code>datetime</code></em></p>
<div id="457d15f3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># created = issues[0].created_at</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># print(created, '-&gt;', gh2date(created))</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You can set the <code>debug</code> attribute to any callable to intercept all requests, for instance to print <code>Request.summary</code>. <a href="https://ghapi.fast.ai/core.html#print_summary"><code>print_summary</code></a> is provided for this purpose. Using this, we can see the preview header that is added for preview functionality, e.g.</p>
<div id="984f6a7c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>api.debug<span class="op">=</span>print_summary</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>api.codes_of_conduct.get_all_codes_of_conduct()[<span class="dv">0</span>]</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>api.debug<span class="op">=</span><span class="va">None</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'data': None,
 'full_url': 'https://api.github.com/codes_of_conduct',
 'headers': {'Accept': 'application/vnd.github.v3+json'},
 'method': 'GET'}</code></pre>
</div>
</div>
</section>
<section id="preview-endpoints" class="level3">
<h3 class="anchored" data-anchor-id="preview-endpoints">Preview endpoints</h3>
<p>GitHub’s preview API functionality requires a special header to be passed to enable it. This is added automatically for you.</p>
</section>
</section>
<section id="convenience-methods" class="level2">
<h2 class="anchored" data-anchor-id="convenience-methods">Convenience methods</h2>
<p>Some methods in the GitHub API are a bit clunky or unintuitive. In these situations we add convenience methods to <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> to make things simpler. There are also some multi-step processes in the GitHub API that <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> provide convenient wrappers for. The methods currently available are shown below; do not hesitate to <a href="https://github.com/fastai/ghapi-test/issues">create an issue</a> or pull request if there are other processes that you’d like to see supported better.</p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L167" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="ghapi.create_gist" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.create_gist">GhApi.create_gist</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_gist(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    description, content, filename:<span class="bu">str</span><span class="op">=</span><span class="st">'gist.txt'</span>, public:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, img_paths:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create a gist, optionally with images where each md img url will be placed with img upload urls.</em></p>
<div id="fcf5bba8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>gist <span class="op">=</span> api.create_gist(<span class="st">"some description"</span>, <span class="st">"some content"</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gist.html_url)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>https://gist.github.com/KeremTurgutlu/299c624d1175231e3d92e91be81afb41</code></pre>
</div>
</div>
<div id="9b7d3cdf" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>gist.files[<span class="st">'gist.txt'</span>].content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'some content'</code></pre>
</div>
</div>
<div id="b6137230" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>gist <span class="op">=</span> api.create_gist(<span class="st">"some description"</span>, <span class="st">"some image</span><span class="ch">\n\n</span><span class="st">![image](puppy.jpg)"</span>, <span class="st">'gist.md'</span>, img_paths<span class="op">=</span>[<span class="st">'puppy.jpg'</span>])</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gist.html_url)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>https://gist.github.com/KeremTurgutlu/5e4197bbcaa63d426b990a841ed55d49</code></pre>
</div>
</div>
<div id="8de7a00b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>gist.files[<span class="st">'gist.md'</span>].content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'some image\n\n![image](https://gist.githubusercontent.com/KeremTurgutlu/5e4197bbcaa63d426b990a841ed55d49/raw/c7f420c839f58c6ac0c05f1116317645d31d7e80/puppy.jpg)'</code></pre>
</div>
</div>
<p>Note that if you want to create a gist with multiple files, call the GitHub API directly, e.g.:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>api.gists.create(<span class="st">"some description"</span>, files<span class="op">=</span>{<span class="st">"f1.txt"</span>: {<span class="st">"content"</span>: <span class="st">"my content"</span>}, ...})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="releases" class="level3">
<h3 class="anchored" data-anchor-id="releases">Releases</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L186" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.delete_release" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.delete_release">GhApi.delete_release</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> delete_release(</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    release</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Delete a release and its associated tag</em></p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L193" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.upload_file" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.upload_file">GhApi.upload_file</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> upload_file(</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    rel, fn</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Upload <code>fn</code> to endpoint for release <code>rel</code></em></p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L202" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.create_release" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.create_release">GhApi.create_release</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_release(</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    tag_name, branch:<span class="bu">str</span><span class="op">=</span><span class="st">'master'</span>, name:NoneType<span class="op">=</span><span class="va">None</span>, body:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, draft:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, prerelease:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>,</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    files:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Wrapper for <code>GhApi.repos.create_release</code> which also uploads <code>files</code></em></p>
<p>Creating a release and attaching files to it is normally a multi-stage process, so <code>create_release</code> wraps this up for you. It takes the same arguments as <a href="https://docs.github.com/rest/reference/repos#create-a-release"><code>repos.create_release</code></a>, along with <code>files</code>, which can contain a single file name, or a list of file names to upload to your release:</p>
<div id="8c43cf5d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>rel <span class="op">=</span> api.create_release(<span class="st">'0.0.1'</span>, files<span class="op">=</span>[<span class="st">'README.md'</span>])</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>test_eq(rel.name, <span class="st">'v0.0.1'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="1e4e6d09" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>sleep(<span class="fl">0.2</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>rels <span class="op">=</span> api.repos.list_releases()</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(rels), <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We can check that our file has been uploaded; GitHub refers to them as “assets”:</p>
<div id="554f12ba" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>assets <span class="op">=</span> api.repos.list_release_assets(rels[<span class="dv">0</span>].<span class="bu">id</span>)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>test_eq(assets[<span class="dv">0</span>].name, <span class="st">'README.md'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L186" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.delete_release-1" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.delete_release-1">GhApi.delete_release</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> delete_release(</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    release</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Delete a release and its associated tag</em></p>
</section>
<section id="branches-and-tags" class="level3">
<h3 class="anchored" data-anchor-id="branches-and-tags">Branches and tags</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L213" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.list_tags" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.list_tags">GhApi.list_tags</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> list_tags(</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    prefix:<span class="bu">str</span><span class="op">=</span><span class="st">''</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>List all tags, optionally filtered to those starting with <code>prefix</code></em></p>
<p>With no <code>prefix</code>, all tags are listed.</p>
<div id="58e44fc9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.list_tags()), <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Using the full tag name will return just that tag.</p>
<div id="aafbf54e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.list_tags(rel.tag_name)), <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L219" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.list_branches" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.list_branches">GhApi.list_branches</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> list_branches(</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    prefix:<span class="bu">str</span><span class="op">=</span><span class="st">''</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>List all branches, optionally filtered to those starting with <code>prefix</code></em></p>
<p>Branches can be listed in the exactly the same way as tags.</p>
<div id="4cee8134" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.list_branches(<span class="st">'master'</span>)), <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We can delete our release and confirm that it is removed:</p>
<div id="bc35551a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>api.delete_release(rels[<span class="dv">0</span>])</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.repos.list_releases()), <span class="dv">0</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="b2f03e9e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #| hide</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co"># #not working</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co"># #| export</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co"># @patch</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="co"># def create_branch_empty(self:GhApi, branch):</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co">#     c = self.git.create_commit(f'create {branch}', EMPTY_TREE_SHA)</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co">#     return self.git.create_ref(f'refs/heads/{branch}', c.sha)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L229" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.create_branch_empty" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.create_branch_empty">GhApi.create_branch_empty</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_branch_empty(</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    branch</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="a7a97233" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>ref <span class="op">=</span> api.create_branch_empty(<span class="st">"testme"</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.list_branches(<span class="st">'testme'</span>)), <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L237" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.delete_tag" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.delete_tag">GhApi.delete_tag</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> delete_tag(</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    tag:<span class="bu">str</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Delete a tag</em></p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L243" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.delete_branch" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.delete_branch">GhApi.delete_branch</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> delete_branch(</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    branch:<span class="bu">str</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Delete a branch</em></p>
<div id="5c6edd6d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>api.delete_branch(<span class="st">'testme'</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.list_branches(<span class="st">'testme'</span>)), <span class="dv">0</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L249" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.get_branch" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.get_branch">GhApi.get_branch</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_branch(</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    branch:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="content-git-files" class="level3">
<h3 class="anchored" data-anchor-id="content-git-files">Content (git files)</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L255" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.list_files" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.list_files">GhApi.list_files</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> list_files(</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>    branch:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="edf71833" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>files <span class="op">=</span> api.list_files()</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>files[<span class="st">'README.md'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>{ <span class="st">'mode'</span>: <span class="st">'100644'</span>,</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">'path'</span>: <span class="st">'README.md'</span>,</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">'sha'</span>: <span class="st">'eaea0f2698e76c75602058bf4e2e9fd7940ac4e3'</span>,</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">'size'</span>: <span class="dv">72</span>,</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">'type'</span>: <span class="st">'blob'</span>,</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">'url'</span>: <span class="st">'https://api.github.com/repos/AnswerDotAI/ghapi-test/git/blobs/eaea0f2698e76c75602058bf4e2e9fd7940ac4e3'</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L262" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.get_content" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.get_content">GhApi.get_content</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_content(</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    path</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="a4a051ed" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>readme <span class="op">=</span> api.get_content(<span class="st">'README.md'</span>).decode()</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="st">'ghapi'</span> <span class="kw">in</span> readme</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L268" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.create_or_update_file" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.create_or_update_file">GhApi.create_or_update_file</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_or_update_file(</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>    path, message, committer, author, content:NoneType<span class="op">=</span><span class="va">None</span>, sha:NoneType<span class="op">=</span><span class="va">None</span>, branch:<span class="bu">str</span><span class="op">=</span><span class="st">''</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L278" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.create_file" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.create_file">GhApi.create_file</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_file(</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>    path, message, committer, author, content:NoneType<span class="op">=</span><span class="va">None</span>, branch:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="1cf6e383" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>person <span class="op">=</span> <span class="bu">dict</span>(name<span class="op">=</span><span class="st">"Monalisa Octocat"</span>, email<span class="op">=</span><span class="st">"octocat@github.com"</span>)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> api.create_file(</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>    path<span class="op">=</span><span class="st">'foo'</span>,</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    message<span class="op">=</span><span class="st">"Create foo"</span>,</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    content<span class="op">=</span><span class="st">"foobar"</span>,</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    committer<span class="op">=</span>person, author<span class="op">=</span>person</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="st">'foobar'</span>, api.get_content(<span class="st">'foo'</span>).decode())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L284" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.delete_file" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.delete_file">GhApi.delete_file</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> delete_file(</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    path, message, committer, author, sha:NoneType<span class="op">=</span><span class="va">None</span>, branch:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="3d9269a2" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>api.delete_file(<span class="st">'foo'</span>, <span class="st">'delete foo'</span>, committer<span class="op">=</span>person, author<span class="op">=</span>person)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="st">'foo'</span> <span class="kw">not</span> <span class="kw">in</span> api.list_files()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L292" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.update_contents" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.update_contents">GhApi.update_contents</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update_contents(</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    path, message, committer, author, content, sha:NoneType<span class="op">=</span><span class="va">None</span>, branch:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="23366c09" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> api.update_contents(</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>    path<span class="op">=</span><span class="st">'README.md'</span>,</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>    message<span class="op">=</span><span class="st">"Update README"</span>,</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    committer<span class="op">=</span>person, author<span class="op">=</span>person,</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    content<span class="op">=</span>readme<span class="op">+</span><span class="st">"foobar"</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>res.content.size</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>78</code></pre>
</div>
</div>
<div id="bd84dcfd" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>readme <span class="op">=</span> api.get_content(<span class="st">'README.md'</span>).decode()</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="st">'foobar'</span> <span class="kw">in</span> readme</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>api.update_contents(<span class="st">'README.md'</span>, <span class="st">"Revert README"</span>, committer<span class="op">=</span>person, author<span class="op">=</span>person, content<span class="op">=</span>readme[:<span class="op">-</span><span class="dv">6</span>])<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="a8e88cac" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> GhApi(token<span class="op">=</span>token)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="c9c4f899" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>owner, repo, branch <span class="op">=</span> <span class="st">"AnswerDotAI"</span>, <span class="st">"fastcore"</span>, <span class="st">"main"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Repo files can be filtered using <a href="https://docs.python.org/3/library/fnmatch.html">fnmatch</a> Unix shell-style wildcards.</p>
<div id="9c43628d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>_find_matches(<span class="st">'README.md'</span>, [<span class="st">'*.py'</span>, <span class="st">'*test_*'</span>, <span class="st">'*/test*/*'</span>, <span class="st">'*.md'</span>, <span class="st">'README.md'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['*.md', 'README.md']</code></pre>
</div>
</div>
<p>The include/exclude logic follows the <strong>rsync/grep model</strong>: a file must match at least one <code>include</code> pattern (if specified), AND must not match any <code>exclude</code> pattern. Exclude always wins—there’s no ambiguity. This is simpler and more predictable than gitignore-style ordering rules. Additionally, LLMs are already familiar with this common pattern from tools like <code>rg</code> and <code>rsync</code>, making it natural to use when this function is provided as an AI tool.</p>
<p>With rsync/grep style, exclude always wins. To get “all .md except README.md”, you’d include README.md explicitly in your results separately.</p>
<div id="0fc16b2a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> _include(<span class="st">'README.md'</span>, [<span class="st">'README.md'</span>], [<span class="st">'*.md'</span>])  <span class="co"># exclude wins</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> _include(<span class="st">'CONTRIBUTING.md'</span>, [<span class="st">'README.md'</span>], [<span class="st">'*.md'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Include all .py files except for tests</p>
<div id="68b0ea85" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> _include(<span class="st">'examples/test_fastcore2.py'</span>, [<span class="st">'*.py'</span>], [<span class="st">'*test_*'</span>, <span class="st">'*/test*/*'</span>])</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> _include(<span class="st">'examples/tests/some_test.py'</span>, [<span class="st">'*.py'</span>], [<span class="st">'*test_*'</span>, <span class="st">'*/tests/*'</span>])</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> _include(<span class="st">'examples/test/some_test.py'</span>, [<span class="st">'*.py'</span>], [<span class="st">'*test_*'</span>, <span class="st">'*/test/*'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="67b14bec" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> _include(<span class="st">'cool/module.py'</span>, [<span class="st">'*.py'</span>], [<span class="st">'setup.py'</span>])</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> _include(<span class="st">'cool/_modidx'</span>, [<span class="st">'*.py'</span>], [<span class="st">'*/_modidx'</span>])</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> _include(<span class="st">'setup.py'</span>, [<span class="st">'*.py'</span>], [<span class="st">'setup.py'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="8e6485c0" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>test_repo_files <span class="op">=</span> [<span class="st">'README.md'</span>, <span class="st">'CONTRIBUTING.md'</span>, <span class="st">'dir/MARKDOWN.md'</span>, <span class="st">'tests/file.py'</span>, </span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'module/file.py'</span>, <span class="st">'module/app/file.py'</span>, <span class="st">'nbs/00.ipynb'</span>, <span class="st">'file2.py'</span>,</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'.gitignore'</span>, <span class="st">'module/.dotfile'</span>, <span class="st">'_hidden.py'</span>, <span class="st">'module/_hidden.py'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Here is an example where we filter to include the README, all python files except for the ones under tests directory, include all notebooks, and exclude all files starting with an underscore.</p>
<div id="00984122" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>inc,exc <span class="op">=</span> [<span class="st">'README.md'</span>, <span class="st">'*.py'</span>, <span class="st">'*.ipynb'</span>], [<span class="st">'tests/*.py'</span>, <span class="st">'_*'</span>, <span class="st">'*/_*'</span>]</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>[fn <span class="cf">for</span> fn <span class="kw">in</span> test_repo_files <span class="cf">if</span> _include(fn,inc,exc)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['README.md',
 'module/file.py',
 'module/app/file.py',
 'nbs/00.ipynb',
 'file2.py']</code></pre>
</div>
</div>
<p>Let’s exclude files starting with <code>test_</code> and <code>setup.py</code> too.</p>
<div id="f2d0222f" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>exc <span class="op">+=</span> [<span class="st">'*test_*.py'</span>, <span class="st">'*/*test*.py'</span>, <span class="st">'setup.py'</span>]<span class="op">;</span> exc</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['tests/*.py', '_*', '*/_*', '*test_*.py', '*/*test*.py', 'setup.py']</code></pre>
</div>
</div>
<p>A function to get repo files with optional filtering</p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L315" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.get_repo_files" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.get_repo_files">GhApi.get_repo_files</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_repo_files(</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    owner, repo, branch:<span class="bu">str</span><span class="op">=</span><span class="st">'main'</span>, inc:NoneType<span class="op">=</span><span class="va">None</span>, exc:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Get all file items of a repo, optionally filtered.</em></p>
<p>The list of files that are kept based on the filtering logic:</p>
<div id="0e386c78" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>repo_files <span class="op">=</span> api.get_repo_files(owner, repo, inc<span class="op">=</span>inc, exc<span class="op">=</span>exc)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(repo_files), <span class="dv">41</span>)<span class="op">;</span> repo_files.attrgot(<span class="st">"path"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['README.md', 'fastcore/all.py', 'fastcore/ansi.py', 'fastcore/basics.py', 'fastcore/dispatch.py', 'fastcore/docments.py', 'fastcore/docscrape.py', 'fastcore/foundation.py', 'fastcore/imghdr.py', 'fastcore/imports.py', 'fastcore/meta.py', 'fastcore/nb_imports.py', 'fastcore/net.py', 'fastcore/parallel.py', 'fastcore/py2pyi.py', 'fastcore/script.py', 'fastcore/shutil.py', 'fastcore/style.py', 'fastcore/tools.py', 'fastcore/transform.py', 'fastcore/utils.py', 'fastcore/xdg.py', 'fastcore/xml.py', 'fastcore/xtras.py', 'nbs/000_tour.ipynb', 'nbs/00_test.ipynb', 'nbs/01_basics.ipynb', 'nbs/02_foundation.ipynb', 'nbs/03_xtras.ipynb', 'nbs/03a_parallel.ipynb', 'nbs/03b_net.ipynb', 'nbs/04_docments.ipynb', 'nbs/05_meta.ipynb', 'nbs/06_script.ipynb', 'nbs/07_xdg.ipynb', 'nbs/08_style.ipynb', 'nbs/09_xml.ipynb', 'nbs/10_py2pyi.ipynb', 'nbs/11_external.ipynb', 'nbs/12_tools.ipynb', 'nbs/index.ipynb']</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L322" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.get_file_content" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.get_file_content">GhApi.get_file_content</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_file_content(</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>    path, owner, repo, branch:<span class="bu">str</span><span class="op">=</span><span class="st">'main'</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L330" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.get_repo_contents" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.get_repo_contents">GhApi.get_repo_contents</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_repo_contents(</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>    owner, repo, branch:<span class="bu">str</span><span class="op">=</span><span class="st">'main'</span>, inc:NoneType<span class="op">=</span><span class="va">None</span>, exc:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="d0b0cebb" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>contents <span class="op">=</span> api.get_repo_contents(owner, repo, inc<span class="op">=</span>inc, exc<span class="op">=</span>exc)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>md <span class="op">=</span> <span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>.join(<span class="ss">f"**[</span><span class="sc">{</span>o<span class="sc">.</span>path<span class="sc">}</span><span class="ss">](</span><span class="sc">{</span>o<span class="sc">.</span>html_url<span class="sc">}</span><span class="ss">)**</span><span class="ch">\n</span><span class="ss">```</span><span class="sc">{</span>o<span class="sc">.</span>path<span class="sc">.</span>split(<span class="st">'.'</span>)[<span class="op">-</span><span class="dv">1</span>]<span class="sc">}</span><span class="ch">\n</span><span class="sc">{</span><span class="bu">chr</span>(<span class="dv">10</span>)<span class="sc">.</span>join(o.content_decoded.split(<span class="bu">chr</span>(<span class="dv">10</span>))[:<span class="dv">5</span>])<span class="sc">}</span><span class="ch">\n</span><span class="ss">```"</span> <span class="cf">for</span> o <span class="kw">in</span> contents[:<span class="dv">3</span>])</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>display(Markdown(md))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong><a href="https://github.com/AnswerDotAI/fastcore/blob/main/README.md">README.md</a></strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb101"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Welcome to fastcore</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- </span><span class="al">WARNING</span><span class="co">: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! --&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/all.py">fastcore/all.py</a></strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb102"><pre class="sourceCode py code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .imports <span class="im">import</span> <span class="op">*</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .foundation <span class="im">import</span> <span class="op">*</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .utils <span class="im">import</span> <span class="op">*</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .parallel <span class="im">import</span> <span class="op">*</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .net <span class="im">import</span> <span class="op">*</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong><a href="https://github.com/AnswerDotAI/fastcore/blob/main/fastcore/ansi.py">fastcore/ansi.py</a></strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb103"><pre class="sourceCode py code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co">"Filters for processing ANSI colors."</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Copyright (c) IPython Development Team.</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Modifications by Jeremy Howard.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="github-pages" class="level3">
<h3 class="anchored" data-anchor-id="github-pages">GitHub Pages</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/main/ghapi/core.py#L337" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.enable_pages" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.enable_pages">GhApi.enable_pages</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> enable_pages(</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>    branch:NoneType<span class="op">=</span><span class="va">None</span>, path:<span class="bu">str</span><span class="op">=</span><span class="st">'/'</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Enable or update pages for a repo to point to a <code>branch</code> and <code>path</code>.</em></p>
<p><code>branch</code> is set to the default branch if <code>None</code>. <code>path</code> must be <code>/docs</code> or <code>/</code>.</p>
<div id="20156da9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> GhApi(owner<span class="op">=</span><span class="st">'AnswerDotAI'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, token<span class="op">=</span>token)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="769d95c8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> api.enable_pages(branch<span class="op">=</span><span class="st">'new-branch'</span>, path<span class="op">=</span><span class="st">'/'</span>)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>test_eq(res.source.branch, <span class="st">'new-branch'</span>)</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>test_eq(res.source.path, <span class="st">'/'</span>)</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>api.repos.delete_pages_site()</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>api.delete_branch(<span class="st">'new-branch'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>{}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ghapi\.fast\.ai\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/fastai/ghapi/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>